window.addEventListener("DOMContentLoaded",()=>{emailjs.init("user_pwnrSymGTUtZ4MVyEqwmT");let formValid={name:!1,subject:!1,email:!1,item:!1,msg:!1};function showError(group,msg){if(!group.classList.contains("error")){group.classList.add("error");let label=group.querySelector(".form__label"),l=label.innerHTML;label.innerHTML=`${l} \n            <div class="form__message">\n                <span>${msg}</span>\n                <i class="bx bx-error"></i>\n            </div>`}}function removeError(group){group.classList.remove("error");let message=group.querySelector(".form__message");message&&message.remove()}function removeAllErrors(){document.querySelectorAll(".form__group").forEach(g=>{g.classList.remove("error");let m=g.querySelector(".form__message");m&&m.remove()})}function validate(input){if(!isEmpty(input.value))return[!1,"Field Empty"];if(!isNaN(input.value)&&("number"!==input.type||"phone"!==input.type))return[!1,"Invalid Field"];let reg=regexValidate(input.type,input.value);return reg[0]?[!0]:[!1,reg[1]]}function isEmpty(value){return 0!==value.length&&""!==value}function regexValidate(type,value){if("email"===type){const email_re=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;return[email_re.test(value),"Invalid Email"]}{const re=/^[a-zA-Z0-9'-,. ]{2,55}$/;return[re.test(value),"Invalid Field"]}}function showNotification(status,msg){console.log("Creating Notification");let notification=document.createElement("div");notification.classList.add("notification");let icon="";"success"===status?(icon='<i class="bx bx-check notification__icon"></i>',notification.classList.add("success")):"error"===status&&(icon='<i class="bx bx-error-alt notification__icon"></i>',notification.classList.add("error")),notification.innerHTML=`\n            <div class="notification__inner">\n                <span>\n                    ${icon}\n                    ${msg}\n                </span>\n                <i class="bx bx-x notification__close" onClick="hideNotification();"></i>\n            </div>\n        `;let notif=document.body.appendChild(notification);setTimeout((function(){notif.classList.add("show")}),500),setTimeout(()=>{notif.classList.remove("show")},5e3)}function hideNotification(){document.querySelector(".notification.show").classList.remove("show")}document.querySelectorAll(".form__input").forEach(input=>{input.addEventListener("input",(function(){if(""!==input.value||0!==input.value.length){const valid=validate(input);valid[0]?(removeError(input.parentNode),formValid[input.id]=!0):(showError(input.parentNode,valid[1]),formValid[input.id]=!1)}else removeError(input.parentNode);Object.values(formValid).every(item=>item)?document.querySelector(".form__button .btn").classList.remove("disabled"):document.querySelector(".form__button .btn").classList.add("disabled")}))}),document.querySelector("form.form").addEventListener("submit",(function(event){event.preventDefault(),removeAllErrors();const form=event.target,groups=form.querySelectorAll(".form__group");let data=[];groups.forEach(group=>{let input=group.querySelector(".form__input"),valid=validate(input);valid[0]?(data.push({valid:!0,value:input.value}),removeError(group)):(data.push({valid:!1,value:input.value}),showError(group,valid[1]))});const formData=data;formData.every((function(input){return input.valid}))&&(document.querySelector(".form__button .btn").innerHTML="<div></div>",emailjs.send("service_4gn38jh","template_feqr0nx",{name:formData[0].value,subject:formData[1].value,email:formData[2].value,phone:formData[3].value,message:formData[4].value,to:"cherrytreehives@gmail.com"}).then((function(response){console.log(response),showNotification("success","Email Sent!")}),(function(error){console.error(error),showNotification("error","Unable to send email")})),document.querySelector(".form__button .btn").innerHTML="Send Message",form.reset())}))});